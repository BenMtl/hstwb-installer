; Install Amiga OS 3.9 Script
; ---------------------------
;
; Date: 2017-07-04
; Author: Henrik Noerfjand Stengaard


; Clear screen
echo "*ec" 


echo ""
echo "Amiga OS 3.9 Installation"
echo "-------------------------"
; Mount FCD0: with Amiga OS 3.9 iso
Mount FCD0:
wait 5

; Copy Workbench 3.9
echo ""
echo "Copying Workbench..."

Copy >NIL: FCD0:OS-VERSION3.9/Workbench3.5 SYSTEMDIR: ALL
Copy >NIL: FCD0:OS-VERSION3.9/Workbench3.9 SYSTEMDIR: ALL

echo "Done"


; Copy libs
echo ""
echo "Copying libs..."

;Copy >NIL: FCD0:OS-VERSION3.9/Extras/Libs/mpega.library SYSTEMDIR:Libs
Copy >NIL: FCD0:OS-VERSION3.9/Extras/Libs/asyncio.library SYSTEMDIR:Libs

echo "Done"


; Copy backdrops (optional)
echo ""
echo "Copying backdrop..."

Copy >NIL: FCD0:OS-VERSION3.9/Extras/Backdrops SYSTEMDIR:Prefs/Presets/Backdrops ALL

echo "Done"


; Copy locale
echo ""
echo "Copying locale..."

Copy >NIL: FCD0:OS-VERSION3.9/LOCALE SYSTEMDIR:Locale ALL

echo "Done"


; Printers
; --------

; Skipped!


; Copy keymaps
; ------------

echo ""
echo "Copying keymaps..."

Copy >NIL: FCD0:OS-VERSION3.9/Workbench3.9/Storage/Keymaps SYSTEMDIR:Devs/Keymaps

echo "Done"


;
; Copy 68040.library, if it doesn't exist
;IF NOT EXISTS "SYSTEMDIR:Libs/68040.library"
;  Copy >NIL: "FCD0:OS-VERSION3.9/Extras/Libs/68040.library" SYSTEMDIR:Libs
;ENDIF

; Copy 68060.library, if it doesn't exist
;IF NOT EXISTS "SYSTEMDIR:Libs/68060.library"
;  Copy >NIL: "FCD0:OS-VERSION3.9/Extras/Libs/68060.library" SYSTEMDIR:Libs
;ENDIF


; Update FastFileSystem
; ---------------------
IF EXISTS "SYSTEMDIR:L/FastFileSystem"
  Version >NIL: "SYSTEMDIR:L/FastFileSystem" 40 FILE
  IF WARN
    Rename >NIL: "SYSTEMDIR:L/FastFileSystem" "SYSTEMDIR:L/FastFileSystem-old"
  ENDIF 
ENDIF 

Copy >NIL: "FCD0:OS-VERSION3.9/L/FastFileSystem" "SYSTEMDIR:L"


; Fix fonts
; ---------

echo ""
echo "Fix fonts..."

Assign >NIL: Fonts: "SYSTEMDIR:Fonts"

SYSTEMDIR:System/FixFonts

Assign >NIL: Fonts: "SYSTEMDIR:Fonts" REMOVE

echo "Done"


; Install RTG
; -----------

MakePath >NIL: "SYSTEMDIR:Libs/Picasso96"

Copy >NIL: "FCD0:CONTRIBUTION/PICASSO96INSTALL/LIBS/PICASSO96/rtg.library" "SYSTEMDIR:Libs/Picasso96"
Copy >NIL: "FCD0:CONTRIBUTION/PICASSO96INSTALL/LIBS/PICASSO96/fastlayers.library" "SYSTEMDIR:Libs/Picasso96"
Copy >NIL: "FCD0:CONTRIBUTION/PICASSO96INSTALL/LIBS/PICASSO96/emulation.library" "SYSTEMDIR:Libs/Picasso96"
Copy >NIL: "FCD0:CONTRIBUTION/PICASSO96INSTALL/LIBS/PICASSO96/uaegfx.card" "SYSTEMDIR:Libs/Picasso96"
Copy >NIL: "FCD0:CONTRIBUTION/PICASSO96INSTALL/LIBS/Picasso96API.library" "SYSTEMDIR:Libs"

Copy >NIL: "FCD0:CONTRIBUTION/PICASSO96INSTALL/PREFS/PVS" "SYSTEMDIR:Prefs"
Copy >NIL: "FCD0:CONTRIBUTION/PICASSO96INSTALL/PREFS/PVS.info" "SYSTEMDIR:Prefs"

; Copy picasso96 storage files
MakePath >NIL: "SYSTEMDIR:Storage/Picasso96"
Copy >NIL: "FCD0:CONTRIBUTION/PICASSO96INSTALL/PICASSO96.INFO" "SYSTEMDIR:Storage/Picasso96.info"
Copy >NIL: "FCD0:CONTRIBUTION/PICASSO96INSTALL/PICASSO96" "SYSTEMDIR:Storage/Picasso96" ALL
Copy >NIL: "FCD0:CONTRIBUTION/PICASSO96INSTALL/DRIVERS" "SYSTEMDIR:Storage/Picasso96" ALL
Copy >NIL: "FCD0:CONTRIBUTION/PICASSO96INSTALL/PICASSO96.README" "SYSTEMDIR:Storage/Picasso96/Picasso96.readme"
Copy >NIL: "FCD0:CONTRIBUTION/PICASSO96INSTALL/DOCUMENTATION/PICASSO96_ENGLISH.GUIDE" "SYSTEMDIR:Storage/Picasso96/Picasso96_english.guide"
Copy >NIL: "FCD0:CONTRIBUTION/PICASSO96INSTALL/DOCUMENTATION/PICASSO96_ENGLISH.GUIDE.INFO" "SYSTEMDIR:Storage/Picasso96/Picasso96_english.guide.info"
Copy >NIL: "FCD0:CONTRIBUTION/PICASSO96INSTALL/VERSION" "SYSTEMDIR:Storage/Picasso96/Version"

; Copy picasso 96 monitor
Copy >NIL: "FCD0:CONTRIBUTION/PICASSO96INSTALL/DEVS/MONITORS/PICASSO96" "SYSTEMDIR:Devs/Monitors/uaegfx"
Copy >NIL: "FCD0:CONTRIBUTION/PICASSO96INSTALL/DEVS/MONITORS/PICASSO96.info" "SYSTEMDIR:Devs/Monitors/uaegfx.info"

; Update uaegfx info tooltype
Echo "BOARDTYPE=uaegfx" >RAM:uaegfx_tooltype
Echo "SETTINGSFILE=SYS:Devs/Picasso96Settings" >>RAM:uaegfx_tooltype
Echo "(BORDERBLANK=Yes)" >>RAM:uaegfx_tooltype
Echo "(BIGSPRITE=Yes)" >>RAM:uaegfx_tooltype
Echo "(SOFTSPRITE=Yes)" >>RAM:uaegfx_tooltype
Echo "IGNOREMASK=Yes" >>RAM:uaegfx_tooltype
Echo "(DISPLAYCHAIN=Yes)" >>RAM:uaegfx_tooltype
FileToTT FROM "RAM:uaegfx_tooltype" TO "SYSTEMDIR:Devs/Monitors/uaegfx"

; Create picasso 96 env-archive
MakePath >NIL: "SYSTEMDIR:Prefs/Env-Archive/Picasso96"
Echo "15kHz" NOLINE >SYSTEMDIR:Prefs/Env-Archive/Picasso96/AmigaVideo
Echo "No" NOLINE >SYSTEMDIR:Prefs/Env-Archive/Picasso96/BlackSwitching
Echo "No" NOLINE >SYSTEMDIR:Prefs/Env-Archive/Picasso96/DirectColorMask
Echo "No" NOLINE >SYSTEMDIR:Prefs/Env-Archive/Picasso96/DoNotSetMMU
Echo "Essential" NOLINE >SYSTEMDIR:Prefs/Env-Archive/Picasso96/ShowModes
Echo "No" NOLINE >SYSTEMDIR:Prefs/Env-Archive/Picasso96/PlanarOnlyDIPFDBUF
Echo "No" NOLINE >SYSTEMDIR:Prefs/Env-Archive/Picasso96/PlanesToFast
Echo "No" NOLINE >SYSTEMDIR:Prefs/Env-Archive/Picasso96/EnableBootVGA
Echo "No" NOLINE >SYSTEMDIR:Prefs/Env-Archive/Picasso96/DisableAmigaBlitter
Echo "No*NDo not enable!*NOnly useful for the rtg.library developers." NOLINE >SYSTEMDIR:Prefs/Env-Archive/Picasso96/Debug
Echo "No*NDo not enable!*NOnly useful for the rtg.library developers." NOLINE >SYSTEMDIR:Prefs/Env-Archive/Picasso96/Experimental

; Update or add picasso 96 assign in user startup
IF EXISTS "SYSTEMDIR:S/User-Startup"
ELSE
  Echo "Assign Picasso96: *"SYS:Storage/Picasso96*"" >SYSTEMDIR:S/User-Startup
ENDIF

; Copy default picasso 96 screenmode prefs with display mode set to "UAE:1024x 768 16bit PC"
Copy >NIL: "INSTALL:Install/Picasso96/screenmode.prefs" "SYSTEMDIR:Prefs/Env-Archive/Sys"

;quit

;FCD0:EMERGENCY-DISK/C/CheckRTG

;IF $RC EQ 0
;ENDIF

;Copy >NIL: "FCD0:CONTRIBUTION/PICASSO96INSTALL/LIBS/PICASSO96" "SYSTEMDIR:Libs/PICASSO96" ALL
;Copy >NIL: "FCD0:CONTRIBUTION/PICASSO96INSTALL/Devs" "SYSTEMDIR:Devs" ALL

; cgxsystem.library v3/v4
; EMERGENCY-DISK:Devs/Monitors
;Copy >NIL: "FCD0:CONTRIBUTION/CYBERGRAPH3/"
; EMERGENCY-DISK:Libs/cgxsystem.library

;Copy >NIL: "FCD0:CONTRIBUTION/EMERGENCY-DISK/Prefs/Presets" "SYSTEMDIR:Prefs/Presets" ALL

; EMERGENCY-DISK:Prefs/Env-Archive/cybergraphx

; cybergraphics.library v2
; "EMERGENCY-DISK:Devs/Monitors")
; "EMERGENCY-DISK:Libs/cybergraphics.library")
; "EMERGENCY-DISK:Libs/cyberintuition.library")
; "EMERGENCY-DISK:Libs/cyberlayers.library")

;MakePath >NIL: "Prefs/Env-Archive/cybergraphics"
; "EMERGENCY-DISK:Prefs/Env-Archive/cybergraphics")



; Cleanup
; -------

echo ""
echo "Cleaning up..."


FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Prefs"   10 220 DXPOS 50 DYPOS 50 DWIDTH 520 DHEIGHT 240
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Prefs/Font"                       10 10
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Prefs/Locale"                     80 10

;      (tooltype (dest (tackon target "Prefs/Locale")) (settooltype "MAP" "PROGDIR:WORLDMAP"))

FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Prefs/Pointer"                   150 10
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Prefs/PrinterPS"                 220 10
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Prefs/Sound"                     290 10
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Prefs/ReAction"                  360 10
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Prefs/IControl"                   10 80
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Prefs/Overscan"                   80 80
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Prefs/Printer"                   150 80
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Prefs/ScreenMode"                220 80
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Prefs/Time"                      290 80
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Prefs/Workbench"                 360 80
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Prefs/Input"                     10 150
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Prefs/Palette"                   80 150
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Prefs/PrinterGfx"               150 150
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Prefs/Serial"                   220 150
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Prefs/WBPattern"                290 150
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Prefs/Presets"                  430 150
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Prefs/CacheCDFS"                360 150

FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Utilities"      10 80 DXPOS 40 DYPOS 60 DWIDTH 180 DHEIGHT 100
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Utilities/Clock"                  80 10
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Utilities/MultiView"              10 10

FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Tools"          10 150 DXPOS 20 DYPOS 80 DWIDTH 290 DHEIGHT 300
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Tools/Commodities"     10 10 DXPOS 80 DYPOS 60 DWIDTH 240 DHEIGHT 240
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Tools/Commodities/Exchange"       10 10
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Tools/Commodities/Blanker"        10 80
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Tools/Commodities/ClickToFront"   80 10
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Tools/Commodities/CrossDOS"       80 80
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Tools/Commodities/FKey"          150 10
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Tools/Commodities/AutoPoint"     10 150
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Tools/Commodities/NoCapsLock"    80 150
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Tools/Commodities/MouseBlanker"  150 80

FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Tools/EditPad"                   80  10
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Tools/IconEdit"                 150  10
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Tools/PrepCard"                 220  10
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Tools/Mounter"                   10  80
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Tools/MEmacs"                    80  80
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Tools/ShowConfig"               150  80
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Tools/CMD"                      220  80
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Tools/Calculator"                10 150
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Tools/HDToolBox"                 80 150
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Tools/KeyShow"                  150 150
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Tools/Lacer"                    220 150
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Tools/GraphicDump"               10 220
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Tools/InitPrinter"               80 220
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Tools/PrintFiles"               150 220
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Tools/FindFile"                 220 220

FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:System"    10 10 DXPOS 50 DYPOS 60 DWIDTH 240 DHEIGHT 180
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:System/FixFonts"                10 10
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:System/Format"                  80 10
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:System/NoFastMem"              150 10
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:System/RexxMast"                10 80
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:System/Shell"                   80 80
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:System/Intellifont"            150 80

FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Devs"      80 10 DXPOS 80 DYPOS 77 DWIDTH 180 DHEIGHT 230
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Devs/Datatypes"                 10  10
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Devs/DosDrivers"                10  80
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Devs/KeyMaps"                   80  10
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Devs/Monitors"                  80  80
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Devs/Printers"                 10 150

FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Storage"              80  80 DXPOS 480 DYPOS 77 DWIDTH 180 DHEIGHT 230
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Storage/Datatypes"    10  10 DXPOS 480 DYPOS 77 DWIDTH 107 DHEIGHT 199
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Storage/DosDrivers"   10  80 DXPOS 480 DYPOS 77 DWIDTH 107 DHEIGHT 199
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Storage/KeyMaps"      80  10 DXPOS 480 DYPOS 77 DWIDTH 107 DHEIGHT 199
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Storage/Monitors"     80  80 DXPOS 480 DYPOS 77 DWIDTH 107 DHEIGHT 199
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Storage/Printers"     10 150 DXPOS 480 DYPOS 77 DWIDTH 107 DHEIGHT 199

FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:WBStartup" 80 220
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Expansion" 80 150
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Trashcan" 160 220
FCD0:OS-VERSION3.9/INSTALL-TOOLS/ICONPOS >NIL: "SYSTEMDIR:Disk"      DXPOS 50 DYPOS 50 DWIDTH 250 DHEIGHT 310


; End
; ---
echo ""
echo "Amiga OS 3.9 installation is complete."
echo ""
ask "Press ENTER to continue"